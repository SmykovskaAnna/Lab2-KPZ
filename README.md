# PHP-проєкт: Хрестики-нулики

## Опис
Це веб-застосунок на PHP, який дозволяє зареєстрованим користувачам грати у гру "Хрестики-нулики" проти бота або іншого гравця. Є підтримка різного розміру поля (3x3, 4x4, 5x5) і рівнів складності бота (легкий, середній, важкий).

---

## Локальний запуск

1. **Системні вимоги**
   - PHP 7.4 або вище
   - MySQL
   - XAMPP / MAMP / LAMP або інший сервер
   - Composer (опціонально)

2. **Клонуйте репозиторій**
   ```bash
   git clone https://github.com/SmykovskaAnna/Lab2-KPZ.git
   ```

3. **База даних**
   - Створіть базу даних `tic_tac_toe` у phpMyAdmin

4. **Налаштування**
   - Вкажіть параметри підключення до БД у файлі `config.php`:
     ```php
     return [
         'db' => [
             'host' => 'localhost',
             'dbname' => 'tic_tac_toe',
             'user' => 'root',
             'pass' => ''
         ]
     ];
     ```

5. **Запуск**
   - Відкрийте `http://localhost/project/public/index.php` у браузері

---

## Функціональність

- Реєстрація та вхід користувачів ([UserController.php](controllers/UserController.php))
- Початок гри з вибором режиму, розміру поля, складності ([views/game/start.php](views/game/start.php))
- Сесії для збереження даних про користувача ([Session.php](core/Session.php))
- Гра проти бота або іншого гравця
- Вибір символу гравця (X, @, *, #, ...)

---

## Структура проєкту

```
├── config.php
├── controllers/
│   ├── GameController.php
│   └── UserController.php
├── core/
│   ├── Router.php
│   └── Session.php
├── models/
│   ├── Chat.php
│   ├── Game.php
│   └── User.php
├── public/
│   ├── assets/
│   │   └── style.css
│   └── index.php
├── views/
│   ├── layout/
│   │   ├── header.php
│   │   └── footer.php
│   ├── auth/
│   │   ├── register.php
│   │   └── login.php
│   └── game/
│       ├── board.php
│       ├── result.php
│       ├── start.php
│       └── stats.php
```

---

## Programming Principles

### 1. **DRY (Don't Repeat Yourself)**
   - Унікнення дублювання логіки роботи з сесіями через окремий клас [`Session.php`](core/Session.php).

### 2. **KISS (Keep It Simple, Stupid)**
   - Простий контролер `UserController.php`, який розділяє обробку запитів (GET/POST) і бізнес-логіку (у моделі `User.php`).

### 3. **SOLID (частково – Single Responsibility)**
   - Кожен клас відповідає за одну задачу: `User` – доступ до даних, `UserController` – логіка авторизації, `Session` – сесії.

### 4. **YAGNI (You Ain’t Gonna Need It)**
   - Жоден функціонал не додається наперед — реалізуються лише потрібні функції: реєстрація, вхід, гра, чат, статистика.
   - Рівні складності AI обмежені тільки тими, які реалізовані на поточний момент.

### 5. **Composition Over Inheritance**
   - Клас GameController використовує залежності через композицію (Game, Chat, User), а не через спадкування.
   - Це спрощує тестування й ізоляцію логіки.

### 6. **Program to Interfaces, not Implementations (частково)**
   - У перспективі можна реалізувати інтерфейс StorageInterface для роботи з БД та заміни PDO при потребі (приклад майбутнього розширення).
   - Зараз — класи отримують залежності ($pdo) через конструктор, що вже готує їх до реалізації цього принципу.

### 7. **Fail Fast**
   - Валідація даних відбувається на початку методів (User::register(), Game::saveResult()).
   - У разі помилки — програма одразу завершує виконання з виведенням повідомлення (exit, throw).
   - Всі SQL-запити виконуються з перевіркою (prepare()->execute()) і використовують виключення.

---

## Design Patterns

### 1. **MVC (Model-View-Controller)**
   - Структура проєкту чітко розділена на моделі, представлення та контролери:
     - [UserController.php](controllers/UserController.php)
     - [User.php](models/User.php)
     - [login.php, register.php, start.php](views/...)

### 2. **Singleton (для сесій)**
   - Клас `Session.php` забезпечує єдиний спосіб керування сесією у всій програмі.

### 3. **Factory Method (частково)**
   - Метод User::register() створює новий запис користувача, не розкриваючи деталі створення об’єкта (password_hash, prepare, execute).
   - У перспективі можна винести створення об'єктів (User, Game) у фабричний клас.
### 4. **Strategy (частково реалізується для бота)**
   - Поведінка бота може бути реалізована через різні стратегії залежно від обраного рівня складності (легкий, середній, важкий).
   - Кожна стратегія — окремий клас або функція, що реалізує відповідну логіку ходу.
### 5. **Dependency Injection**
   - Класи User, Game, Chat отримують PDO-підключення через конструктор. Це спрощує тестування та змінюваність коду, дозволяючи замінити залежності.
### 6. **Template Method**
   - views/layout/header.php та footer.php використовуються як шаблони представлення для сторінок.
   - Спільна структура інтерфейсу формується в шаблоні, а вміст додається у відповідних представленнях.

---

## Техніки рефакторингу

- Винесення логіки сесій в окремий клас
- Передача підключення до бази даних в конструктор моделі
- Розділення бізнес-логіки (в моделях) та контролерів
- Використання шаблонів для повторюваних елементів інтерфейсу (header/footer)

---

## Автор
**Смиковська Анна**  
Група: ЗІПЗ-23-1
Email: zipz231_sav@student.ztu.edu.ua